{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} - Sesiones{% endblock %}

{% block stylesheets %}

    <!-- Estilos de datatables -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.bootstrap4.css">
    <link href="https://cdn.datatables.net/2.0.3/css/dataTables.bootstrap4.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/3.0.1/css/buttons.bootstrap4.min.css" rel="stylesheet">

    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/sessions.css') }}">
{% endblock %}

{% block body %}
    {{ parent() }}

    <div style="width: 100vw;">
        <div class="cabecera">
            <div class="contenidoCabecera">
                <h2 class="titulo">Sesiones disponibles</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="boton" id="nuevaSesion">Sesión</button>
                    <div class="divider"></div>
                    <button class="boton" id="nuevoServicio">Servicio</button>
                    <button class="boton" id="nuevoExtra">Extra</button>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row contenedor-dataTable">
                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                    <div class="table-responsive">
                        <table id="example" class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Nº</th>
                                <th>Sesión</th>
                                <th>Servicio</th>
                                <th>Extras</th>
                                <th>Fecha</th>
                                <th>Precio</th>
                                <th>Descripción</th>
                                <th>Fotógrafo</th>
                                <th>Cliente</th>
                                <th>Ticket</th>
                                <th>Opciones</th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Crear Sesion -->
    <div class="modalSesion" id="modalSesion">
        <div class="modalSesion-content">
            <span class="cerrarModal" id="CerrarSessionButton">&times;</span>
            <h1><i class="fa-solid fa-camera"></i>&nbsp;Nueva sesión</h1>
            <div class="contenedorFormularioSesion" id="contenedorFormularioSesion">
                <form method="post" id="formEvent">
                    {#  {{ form_errors(formEvent) }} #}
                    {{ form_start(formSession) }}
                    <div class="camposSession">
                        <div>
                            <label class="label">Nombre</label>
                            {{ form_widget(formSession.name, {'attr': {'class': 'padding', 'placeholder': 'Nombre'}}) }}
                        </div>
                        <div>
                            <label class="label">Servicio</label>
                            {{ form_widget(formSession.service, {'attr': {'class': 'padding', 'placeholder': 'Servicio'}}) }}
                        </div>
                        <div>
                            <label class="label">Fecha</label>
                            {{ form_widget(formSession.date, {'attr': {'class': 'padding', 'placeholder': 'Fecha'}}) }}
                        </div>
                        <div>
                            <label class="label">Precio</label>
                            {{ form_widget(formSession.priceSession, {'attr': {'class': 'padding', 'placeholder': 'Precio'}}) }}
                        </div>
                        <div>
                            <label class="label">Descripción</label>
                            {{ form_widget(formSession.descriptionSession, {'attr': {'class': 'padding', 'placeholder': 'Descripción'}}) }}
                        </div>
                    </div>
                    <div class="camposSession">
                        <div>
                            <label class="label">Usuarios</label>
                            <div class="desplegable">
                                {{ form_widget(formSession.users, {'attr': {'class': 'padding'}}) }}
                            </div>
                        </div>
                        <div>
                            <label class="label">Extras</label>
                            <div class="desplegable">
                                {{ form_widget(formSession.extras, {'attr': {'class': 'padding'}}) }}
                            </div>
                        </div>
                    </div>
                    <div class="camposParalelosSession">
                        <button id="CerrarSesion" class="closeSession">Atrás</button>
                        <button type="submit" class="submitSession">Crear</button>
                    </div>
                    {{ form_end(formSession) }}
                </form>
            </div>
        </div>
    </div>


    <!-- Modal Crear Extra -->
    <div class="modalExtra" id="modalExtra">
        <div class="modalExtra-content">
            <span class="cerrarModal" id="CerrarExtraButton">&times;</span>
            <h1><i class="fa-solid fa-circle-plus"></i>&nbsp;Nuevo Extra</h1>
            <div class="contenedorFormularioExtra" id="contenedorFormularioExtra">
                <form method="post" id="formExtras">
                    {#  {{ form_errors(formExtras) }} #}
                    {{ form_start(formExtras) }}
                    <div>
                        <label class="label">Nombre</label>
                        {{ form_widget(formExtras.name, {'attr': {'class': 'padding', 'placeholder': 'Nombre'}}) }}
                    </div>
                    <div>
                        <label class="label">Precio</label>
                        {{ form_widget(formExtras.priceExtra, {'attr': {'class': 'padding', 'placeholder': 'Precio'}}) }}
                    </div>
                    {{ form_end(formExtras) }}
                </form>
                <div class="camposParalelos">
                    <button id="CerrarExtra" class="closeExtras">Atrás</button>
                    <button type="submit" class="submitExtras">Crear</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Crear Servicio -->
    <div class="modalServicio" id="modalServicio">
        <div class="modalServicio-content">
            <span class="cerrarModal" id="CerrarServicioButton">&times;</span>
            <h1><i class="fa-solid fa-circle-plus"></i>&nbsp;Nuevo Servicio</h1>
            <div class="contenedorFormularioServicio" id="contenedorFormularioServicio">
                <form method="post" id="formServices">
                    {#  {{ form_errors(formServices) }} #}
                    {{ form_start(formServices) }}
                    <div>
                        <label class="label">Nombre</label>
                        {{ form_widget(formServices.name, {'attr': {'class': 'padding', 'placeholder': 'Nombre'}}) }}
                    </div>
                    <div>
                        <label class="label">Precio</label>
                        {{ form_widget(formServices.priceService, {'attr': {'class': 'padding', 'placeholder': 'Precio'}}) }}
                    </div>
                    {{ form_end(formServices) }}
                </form>
                <div class="camposParalelos">
                    <button id="CerrarServicio" class="closeServicio">Atrás</button>
                    <button type="submit" class="submitServicio">Crear</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Ver Ticket -->
    <div class="modalVerTicket" id="modalVerTicket">
        <div class="modalVerTicket-content">
            <span class="cerrarModal" id="CerrarVerTicketButton">&times;</span>
            <h1><i class="fa-solid fa-file"></i>&nbsp;Ticket</h1>
            <div class="contenedorFormularioVerTicket" id="contenedorFormularioVerTicket">
                <form>
                    <div class="camposTicket">
                        <div>
                            <label class="label">Sesión</label>
                            <input type="text" name="session"/>
                        </div>
                        <div>
                            <label class="label">Fecha</label>
                            <input type="datetime-local" name="date"/>
                        </div>
                        <div>
                            <label class="label">Servicio</label>
                            <!--<input type="text" name="service"/>-->
                            <select name="service" class="padding">
                                <option value=""></option>
                            </select>
                        </div>
                        <div>
                            <label class="label">Precio Total</label>
                            <input type="text" name="precioTotal"/>
                        </div>
                        <div>
                            <label class="label">Descripción</label>
                            <textarea name="descripcion"></textarea>
                        </div>
                    </div>

                    <div class="botonesExtras" id="extrasContainer"></div>
                </form>
                <div class="camposParalelos">
                        <button id="cerrarVerTicket" class="closeVerTicket">Atrás</button>
                        <!--<button id="guardarVerTicket">Guardar</button>-->
                        <button id="descargarVerTicket" class="submitVerTicket">Descargar</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Editar Sesion -->
    <div class="modalEditarSesion" id="modalEditarSesion">
        <div class="modalEditarSesion-content">
            <span class="cerrarModal" id="CerrarEditarSessionButton">&times;</span>
            <h1><i class="fa-solid fa-camera"></i>&nbsp;Editar sesión</h1>
            <div class="contenedorFormularioEditarSesion" id="contenedorFormularioEditarSesion">
                <form id="formSessionUpdate">
                    <div>
                        <label class="label">Id</label>
                        <input type="text" class="bloquear" name="id" disabled/>
                    </div>
                    <div>
                        <label class="label">Sesión</label>
                        <input type="text" id="sessionUpdate_name" name="sessionUpdate_name" class="padding"/>
                    </div>
                    <div>
                        <label class="label">Servicio</label>
                        <select id="sessionUpdate_service" name="sessionUpdate_service" class="padding">
                            <option value=""></option>
                        </select>
                    </div>
                    <div>
                        <label class="label">Fecha</label>
                        <input type="datetime-local" id="sessionUpdate_date" name="sessionUpdate_date" class="padding"/>
                    </div>
                    <div>
                        <label class="label">Precio</label>
                        <input type="number" id="sessionUpdate_price" name="sessionUpdate_price" class="padding"/>
                    </div>
                    <div>
                        <label class="label">Descripción</label>
                        <input type="text" id="sessionUpdate_description" name="sessionUpdate_description" class="padding"/>
                    </div>
                </form>
                    <div class="camposParalelos">
                        <button id="cerrarEditarSesion" class="closeEditarSession">Atrás</button>
                        <button type="submit" id="guardarEditarSesion" class="submitEditarSession">Guardar</button>
                    </div>
            </div>
        </div>
    </div>

    <script

    {% block javascripts %}
        {{ parent() }}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.1.135/jspdf.min.js"></script>

        <!-- Script para dataTable -->
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.bootstrap4.js"></script>

        <!-- Scripts para añadir botones -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/2.0.3/js/dataTables.bootstrap4.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/3.0.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.bootstrap4.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/3.0.1/js/buttons.print.min.js"></script>

        <script src="https://kit.fontawesome.com/77aa5e27b8.js" crossorigin="anonymous"></script>

        <script src="{{ asset('js/sessions.js') }}"></script>
        <script type="module" src="{{ asset('js/dataTable.js') }}"></script>

        <script>
            new DataTable('#example');
        </script>

        <script>

        </script>
    {% endblock %}
{% endblock %}
